{"version":3,"sources":["node_modules/pixi5-svg/node_modules/tinycolor2/tinycolor.js","node_modules/pixi5-svg/utils.js","node_modules/pixi5-svg/GraphicsNode.js","node_modules/pixi5-svg/index.js","src/live.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["parseScientific","numberString","info","exec","parseFloat","num","replace","numDecs","output","i","splitAttributeParams","attr","indexOf","split","parseTransform","transform","token","math","match","result","c","push","command","shift","params","TAU","Math","PI","unit_vector_angle","ux","uy","vx","vy","sign","dot","acos","get_arc_center","x1","y1","x2","y2","fa","fs","rx","ry","sin_phi","cos_phi","x1p","y1p","rx_sq","ry_sq","x1p_sq","y1p_sq","radicant","sqrt","cxp","cyp","cx","cy","v1x","v1y","v2x","v2y","theta1","delta_theta","approximate_unit_arc","alpha","tan","cos","sin","arcToBezier","phi","abs","lambda","cc","segments","max","ceil","map","curve","length","x","y","xp","yp","intToRGBA","color","r","g","b","GraphicsNode","Path2D","constructor","name","style","fill","stroke","width","_matrix","undefined","children","addChild","childs","l","index","removeChild","splice","drawEllipse","height","ellipse","drawCircle","drawRoundedRect","radius","ctx","moveTo","lineTo","quadraticCurveTo","closePath","drawRect","rect","drawPolygon","points","close","beginFill","lineStyle","setMatrix","matrix","DOMMatrix","fromMatrix","draw","context","safeMode","save","a","d","e","f","fillStyle","lineWidth","strokeStyle","lineJoin","lineCap","restore","EPS","DEFAULT","unpackTree","lineColor","lineOpacity","fillColor","fillOpacity","parseSvgStyle","node","getAttribute","opacity","strokeOpacity","strokeWidth","forEach","prop","value","trim","key","parseSvgTransform","transformAttr","commands","values","dx","dy","translateSelf","sx","sy","scaleSelf","rotateSelf","console","log","SVGNode","svg","options","dataNode","type","nodeName","toLowerCase","parseChildren","parentStyle","parentMatrix","child","nodeStyle","nodeType","shape","fullStyle","Object","assign","fillShapes","svgPath","svgLine","svgCircle","svgRect","svgPoly","hexToUint","hex","substr","parseInt","rgb","toRgb","heightProp","widthProp","isEllipse","pointsAttr","pointsRaw","reduce","acc","p","isStrokable","isFillable","defaultLineWidth","strokeOpacityValue","fillOpacityValue","addPath","SVG","SVGElement","container","document","createElement","innerHTML","Error","_width","_height","body","appendChild","bbox","getBBox","querySelector","canvas","window","innerWidth","innerHeight","getContext","fetch","then","text","data","pw","ph","offset","fileReader","FileReader","input","toogle","ptime","pchildrens","translate","scale","svgE","lastFrame","lastFileResult","addEventListener","_","files","target","onloadend","createAndFit","readAsText","render","cached","setTransform","fillRect","Image","src","toDataURL","frame","cs","drawImage","svgText","start","performance","now","Svg","delta","textContent","toFixed","count","counter","buttons","movementX","movementY","checked","factor","deltaY","clientX","clientY","ox","oy","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","getElementById","remove","stackTrace","innerText","getParents","modules","parents","k","dep","Array","isArray","concat","Function","deps","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"live.1130ca2a.js","sourceRoot":"..","sourcesContent":["// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","export function parseScientific(numberString) {\r\n\tvar info = /([\\d\\\\.]+)e-(\\d+)/i.exec(numberString);\r\n\tif (!info) {\r\n\t\treturn parseFloat(numberString);\r\n\t}\r\n\r\n\tvar num = info[1].replace(\".\", \"\"),\r\n\t\tnumDecs = info[2] - 1;\r\n\tvar output = \"0.\";\r\n\tfor (var i = 0; i < numDecs; i++) {\r\n\t\toutput += \"0\";\r\n\t}\r\n\toutput += num;\r\n\treturn parseFloat(output);\r\n}\r\n\r\nexport function splitAttributeParams(attr) {\r\n\tif (attr.indexOf(\",\") >= 0) {\r\n\t\treturn attr.split(\",\");\r\n\t} else {\r\n\t\t//Especially in IE Edge, the parameters do not have to be split by commas, IE even replaces commas with spaces!\r\n\t\treturn attr.split(\" \");\r\n\t}\r\n}\r\n\r\n/**\r\n * Parse transform attribute\r\n * @param {string} transform \r\n */\r\nexport function parseTransform(transform)\r\n{\r\n\ttransform = transform.replace(/\\ /gi, \",\");\r\n\tlet token = transform;\r\n\tlet math = token.match(/(\\w+\\((\\-?\\d+\\.?\\d*e?\\-?\\d*,?)+\\))+/g);\r\n    let result = [];\r\n\tfor (let i in math )\r\n    {\r\n        let c = math[i].match(/[\\w\\.\\-]+/g);\r\n\t\tresult.push({\r\n\t\t\tcommand : c.shift(),\r\n\t\t\tparams : c\r\n\t\t});\r\n    }\r\n    return result;\r\n}\r\n\r\nvar TAU = Math.PI * 2;\r\n\r\n/* eslint-disable space-infix-ops */\r\n\r\n// Calculate an angle between two unit vectors\r\n//\r\n// Since we measure angle between radii of circular arcs,\r\n// we can use simplified math (without length normalization)\r\n//\r\nfunction unit_vector_angle(ux, uy, vx, vy) {\r\n\tvar sign = ux * vy - uy * vx < 0 ? -1 : 1;\r\n\tvar dot = ux * vx + uy * vy;\r\n\r\n\t// Add this to work with arbitrary vectors:\r\n\t// dot /= Math.sqrt(ux * ux + uy * uy) * Math.sqrt(vx * vx + vy * vy);\r\n\r\n\t// rounding errors, e.g. -1.0000000000000002 can screw up this\r\n\tif (dot > 1.0) {\r\n\t\tdot = 1.0;\r\n\t}\r\n\tif (dot < -1.0) {\r\n\t\tdot = -1.0;\r\n\t}\r\n\r\n\treturn sign * Math.acos(dot);\r\n}\r\n\r\n// Convert from endpoint to center parameterization,\r\n// see http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\r\n//\r\n// Return [cx, cy, theta1, delta_theta]\r\n//\r\nfunction get_arc_center(x1, y1, x2, y2, fa, fs, rx, ry, sin_phi, cos_phi) {\r\n\t// Step 1.\r\n\t//\r\n\t// Moving an ellipse so origin will be the middlepoint between our two\r\n\t// points. After that, rotate it to line up ellipse axes with coordinate\r\n\t// axes.\r\n\t//\r\n\tvar x1p = (cos_phi * (x1 - x2)) / 2 + (sin_phi * (y1 - y2)) / 2;\r\n\tvar y1p = (-sin_phi * (x1 - x2)) / 2 + (cos_phi * (y1 - y2)) / 2;\r\n\r\n\tvar rx_sq = rx * rx;\r\n\tvar ry_sq = ry * ry;\r\n\tvar x1p_sq = x1p * x1p;\r\n\tvar y1p_sq = y1p * y1p;\r\n\r\n\t// Step 2.\r\n\t//\r\n\t// Compute coordinates of the centre of this ellipse (cx', cy')\r\n\t// in the new coordinate system.\r\n\t//\r\n\tvar radicant = rx_sq * ry_sq - rx_sq * y1p_sq - ry_sq * x1p_sq;\r\n\r\n\tif (radicant < 0) {\r\n\t\t// due to rounding errors it might be e.g. -1.3877787807814457e-17\r\n\t\tradicant = 0;\r\n\t}\r\n\r\n\tradicant /= rx_sq * y1p_sq + ry_sq * x1p_sq;\r\n\tradicant = Math.sqrt(radicant) * (fa === fs ? -1 : 1);\r\n\r\n\tvar cxp = ((radicant * rx) / ry) * y1p;\r\n\tvar cyp = ((radicant * -ry) / rx) * x1p;\r\n\r\n\t// Step 3.\r\n\t//\r\n\t// Transform back to get centre coordinates (cx, cy) in the original\r\n\t// coordinate system.\r\n\t//\r\n\tvar cx = cos_phi * cxp - sin_phi * cyp + (x1 + x2) / 2;\r\n\tvar cy = sin_phi * cxp + cos_phi * cyp + (y1 + y2) / 2;\r\n\r\n\t// Step 4.\r\n\t//\r\n\t// Compute angles (theta1, delta_theta).\r\n\t//\r\n\tvar v1x = (x1p - cxp) / rx;\r\n\tvar v1y = (y1p - cyp) / ry;\r\n\tvar v2x = (-x1p - cxp) / rx;\r\n\tvar v2y = (-y1p - cyp) / ry;\r\n\r\n\tvar theta1 = unit_vector_angle(1, 0, v1x, v1y);\r\n\tvar delta_theta = unit_vector_angle(v1x, v1y, v2x, v2y);\r\n\r\n\tif (fs === 0 && delta_theta > 0) {\r\n\t\tdelta_theta -= TAU;\r\n\t}\r\n\tif (fs === 1 && delta_theta < 0) {\r\n\t\tdelta_theta += TAU;\r\n\t}\r\n\r\n\treturn [cx, cy, theta1, delta_theta];\r\n}\r\n\r\n//\r\n// Approximate one unit arc segment with bzier curves,\r\n// see http://math.stackexchange.com/questions/873224\r\n//\r\nfunction approximate_unit_arc(theta1, delta_theta) {\r\n\tvar alpha = (4 / 3) * Math.tan(delta_theta / 4);\r\n\r\n\tvar x1 = Math.cos(theta1);\r\n\tvar y1 = Math.sin(theta1);\r\n\tvar x2 = Math.cos(theta1 + delta_theta);\r\n\tvar y2 = Math.sin(theta1 + delta_theta);\r\n\r\n\treturn [x1, y1, x1 - y1 * alpha, y1 + x1 * alpha, x2 + y2 * alpha, y2 - x2 * alpha, x2, y2];\r\n}\r\n\r\nexport function arcToBezier({ x1, y1, x2, y2, fa, fs, rx, ry, phi }) {\r\n\tvar sin_phi = Math.sin((phi * TAU) / 360);\r\n\tvar cos_phi = Math.cos((phi * TAU) / 360);\r\n\r\n\t// Make sure radii are valid\r\n\t//\r\n\tvar x1p = (cos_phi * (x1 - x2)) / 2 + (sin_phi * (y1 - y2)) / 2;\r\n\tvar y1p = (-sin_phi * (x1 - x2)) / 2 + (cos_phi * (y1 - y2)) / 2;\r\n\r\n\tif (x1p === 0 && y1p === 0) {\r\n\t\t// we're asked to draw line to itself\r\n\t\treturn [];\r\n\t}\r\n\r\n\tif (rx === 0 || ry === 0) {\r\n\t\t// one of the radii is zero\r\n\t\treturn [];\r\n\t}\r\n\r\n\t// Compensate out-of-range radii\r\n\t//\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\r\n\tvar lambda = (x1p * x1p) / (rx * rx) + (y1p * y1p) / (ry * ry);\r\n\tif (lambda > 1) {\r\n\t\trx *= Math.sqrt(lambda);\r\n\t\try *= Math.sqrt(lambda);\r\n\t}\r\n\r\n\t// Get center parameters (cx, cy, theta1, delta_theta)\r\n\t//\r\n\tvar cc = get_arc_center(x1, y1, x2, y2, fa, fs, rx, ry, sin_phi, cos_phi);\r\n\r\n\tvar result = [];\r\n\tvar theta1 = cc[2];\r\n\tvar delta_theta = cc[3];\r\n\r\n\t// Split an arc to multiple segments, so each segment\r\n\t// will be less than /4 (= 90)\r\n\t//\r\n\tvar segments = Math.max(Math.ceil(Math.abs(delta_theta) / (TAU / 4)), 1);\r\n\tdelta_theta /= segments;\r\n\r\n\tfor (var i = 0; i < segments; i++) {\r\n\t\tresult.push(approximate_unit_arc(theta1, delta_theta));\r\n\t\ttheta1 += delta_theta;\r\n\t}\r\n\r\n\t// We have a bezier approximation of a unit circle,\r\n\t// now need to transform back to the original ellipse\r\n\t//\r\n\treturn result.map(function(curve) {\r\n\t\tfor (var i = 0; i < curve.length; i += 2) {\r\n\t\t\tvar x = curve[i + 0];\r\n\t\t\tvar y = curve[i + 1];\r\n\r\n\t\t\t// scale\r\n\t\t\tx *= rx;\r\n\t\t\ty *= ry;\r\n\r\n\t\t\t// rotate\r\n\t\t\tvar xp = cos_phi * x - sin_phi * y;\r\n\t\t\tvar yp = sin_phi * x + cos_phi * y;\r\n\r\n\t\t\t// translate\r\n\t\t\tcurve[i + 0] = xp + cc[0];\r\n\t\t\tcurve[i + 1] = yp + cc[1];\r\n\t\t}\r\n\r\n\t\treturn curve;\r\n\t});\r\n}\r\n","function intToRGBA(color, alpha = 1) {\r\n\tlet r = (color >> 16) & 0xff;\r\n\tlet g = (color >> 8) & 0xff;\r\n\tlet b = color & 0xff;\r\n\r\n\treturn `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n}\r\n\r\nexport class GraphicsNode extends Path2D {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = \"\";\r\n\t\tthis.style = {\r\n\t\t\tfill: {\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\talpha: 1\r\n\t\t\t},\r\n\t\t\tstroke: {\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\talpha: 1\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._matrix = undefined;\r\n\r\n\t\t/**\r\n\t\t * @type {GraphicsNode []}\r\n\t\t */\r\n\t\tthis.children = [];\r\n\t}\r\n\r\n\taddChild(...childs) {\r\n\t\tlet l = childs.length;\r\n\r\n\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\tlet index = this.children.indexOf(childs[i]);\r\n\t\t\tif (index > 0) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tthis.children.push(childs[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveChild(...childs) {\r\n\t\tlet l = childs.length;\r\n\r\n\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\tlet index = this.children.indexOf(childs[i]);\r\n\t\t\tif (index > 0) {\r\n\t\t\t\tthis.children = this.children.splice(index, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawEllipse(x, y, width, height) {\r\n\t\tthis.ellipse(x, y, width, height, 0, 0, Math.PI * 2);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdrawCircle(x, y, r) {\r\n\t\tthis.drawEllipse(x, y, r, r);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdrawRoundedRect(x, y, width, height, radius = 5) {\r\n\t\tconst ctx = this;\r\n\r\n\t\tctx.moveTo(x + radius, y);\r\n\t\tctx.lineTo(x + width - radius, y);\r\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\t\tctx.lineTo(x + radius, y + height);\r\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\t\tctx.lineTo(x, y + radius);\r\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\t\tctx.closePath();\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdrawRect(x, y, width, height) {\r\n\t\tthis.rect(x, y, width, height);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {number[]} points\r\n\t * @param {boolean} [close]\r\n\t */\r\n\tdrawPolygon(points, close = true) {\r\n\t\tconst ctx = this;\r\n\r\n\t\tctx.moveTo(points[0], points[1]);\r\n\r\n\t\tlet l = points.length;\r\n\r\n\t\tfor (let i = 2; i < l; i += 2) {\r\n\t\t\tctx.lineTo(points[i], points[i + 1]);\r\n\t\t}\r\n\r\n\t\tif (close) ctx.closePath();\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tbeginFill(color = 0, alpha = 1) {\r\n\t\tconst fill = this.style.fill;\r\n\r\n\t\tfill.color = color;\r\n\t\tfill.alpha = alpha;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tlineStyle(width = 0, color = 0xfffff, alpha = 1) {\r\n\t\tconst stroke = this.style.stroke;\r\n\r\n\t\tstroke.alpha = alpha;\r\n\t\tstroke.color = color;\r\n\t\tstroke.width = width;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetMatrix(matrix) {\r\n\t\tthis._matrix = matrix ? DOMMatrix.fromMatrix(matrix) : undefined;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Draw self into context\r\n\t * @param {CanvasRenderingContext2D} context\r\n\t * @param {boolean} safeMode save context state before changing\r\n\t */\r\n\r\n\tdraw(context, safeMode = true) {\r\n\t\tif (safeMode) {\r\n\t\t\tcontext.save();\r\n\t\t}\r\n\r\n\t\tlet l = this.children.length;\r\n\r\n\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\tlet c = this.children[i];\r\n\t\t\tif (c.draw) {\r\n\t\t\t\tc.draw(context, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst fill = this.style.fill;\r\n\t\tconst stroke = this.style.stroke;\r\n\r\n\t\tif (this._matrix) {\r\n\t\t\tconst { a, b, c, d, e, f } = this._matrix;\r\n\r\n\t\t\tcontext.transform(a, b, c, d, e, f);\r\n\t\t}\r\n\r\n\t\tif (fill.alpha > 0) {\r\n\t\t\tcontext.fillStyle = intToRGBA(fill.color, fill.alpha);\r\n\t\t\tcontext.fill(this, \"evenodd\");\r\n\t\t}\r\n\r\n\t\tif (stroke.alpha > 0 && stroke.width > 0) {\r\n\t\t\tcontext.lineWidth = stroke.width;\r\n            context.strokeStyle = intToRGBA(stroke.color, stroke.alpha);\r\n            context.lineJoin = \"round\";\r\n            context.lineCap = \"round\";\r\n\r\n\t\t\tcontext.stroke(this);\r\n\t\t}\r\n\r\n\t\tif (safeMode) {\r\n\t\t\tcontext.restore();\r\n\t\t}\r\n\t}\r\n}\r\n","import tcolor from \"tinycolor2\";\r\nimport { parseScientific, parseTransform } from \"./utils\";\r\nimport { GraphicsNode } from \"./GraphicsNode\";\r\n\r\nconst EPS = 0.0001;\r\n/**\r\n * @typedef {Object} DefaultOptions\r\n * @property {number} [lineWidth] default stroke thickness (must be greater or equal of 1)\r\n * @property {number} [lineColor] default stroke color\r\n * @property {number} [lineOpacity] default stroke opacity\r\n * @property {number} [fillColor] default fill color\r\n * @property {number} [fillOpacity] default fill opacity\r\n * @property {boolean} [unpackTree] unpack node tree, otherwise build single Graphics\r\n */\r\n\r\nconst DEFAULT = {\r\n\tunpackTree: false,\r\n\tlineColor: 0,\r\n\tlineOpacity: 1,\r\n\tfillColor: 0,\r\n\tfillOpacity: 1,\r\n\tlineWidth: 1\r\n};\r\n\r\n/**\r\n * Get the style property and parse options.\r\n * @param {SVGElement} node\r\n * @return {Object} Style attributes\r\n */\r\nfunction parseSvgStyle(node) {\r\n\tconst style = node.getAttribute(\"style\");\r\n\tconst result = {\r\n\t\tfill: node.getAttribute(\"fill\"),\r\n\t\topacity: node.getAttribute(\"opacity\"),\r\n\t\tfillOpacity: node.getAttribute(\"fill-opacity\"),\r\n\t\tstroke: node.getAttribute(\"stroke\"),\r\n\t\tstrokeOpacity: node.getAttribute(\"stroke-opacity\"),\r\n\t\tstrokeWidth: node.getAttribute(\"stroke-width\")\r\n\t};\r\n\tif (style !== null) {\r\n\t\tstyle.split(\";\").forEach(prop => {\r\n\t\t\tif (prop) {\r\n\t\t\t\tconst [name, value] = prop.split(\":\");\r\n\t\t\t\tif (name && value) {\r\n\t\t\t\t\tresult[name.trim()] = value.trim();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (result[\"stroke-width\"]) {\r\n\t\t\tresult.strokeWidth = result[\"stroke-width\"];\r\n\t\t\tdelete result[\"stroke-width\"];\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let key in result) {\r\n\t\tif (result[key] === null) {\r\n\t\t\tdelete result[key];\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * Parse transform attribute\r\n * @param {SVGElement} node\r\n */\r\nfunction parseSvgTransform(node) {\r\n\tif (!node.getAttribute(\"transform\")) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tlet matrix = new DOMMatrix();\r\n\tconst transformAttr = node.getAttribute(\"transform\");\r\n\tconst commands = parseTransform(transformAttr);\r\n\r\n\t//apply transform matrix right to left\r\n\tfor (let key = 0 ; key < commands.length; key ++) {\r\n\t\tlet command = commands[key].command;\r\n\t\tlet values = commands[key].params;\r\n\r\n\t\tswitch (command) {\r\n\t\t\tcase \"matrix\": {\r\n\t\t\t\tmatrix.a = parseScientific(values[0]);\r\n\t\t\t\tmatrix.b = parseScientific(values[1]);\r\n\t\t\t\tmatrix.c = parseScientific(values[2]);\r\n\t\t\t\tmatrix.d = parseScientific(values[3]);\r\n\t\t\t\tmatrix.e = parseScientific(values[4]);\r\n\t\t\t\tmatrix.f = parseScientific(values[5]);\r\n\r\n\t\t\t\treturn matrix;\r\n\t\t\t}\r\n\t\t\tcase \"translate\": {\r\n\t\t\t\tconst dx = parseScientific(values[0]);\r\n\t\t\t\tconst dy = parseScientific(values[1]) || 0;\r\n\t\t\t\tmatrix.translateSelf(dx, dy);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"scale\": {\r\n\t\t\t\tconst sx = parseScientific(values[0]);\r\n\t\t\t\tconst sy = values.length > 1 ? parseScientific(values[1]) : sx;\r\n\t\t\t\tmatrix.scaleSelf(sx, sy);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"rotate\": {\r\n\t\t\t\tlet dx = 0;\r\n\t\t\t\tlet dy = 0;\r\n\r\n\t\t\t\tif (values.length > 1) {\r\n\t\t\t\t\tdx = parseScientific(values[1]);\r\n\t\t\t\t\tdy = parseScientific(values[2]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmatrix\r\n\t\t\t\t\t.translateSelf(dx, dy)\r\n\t\t\t\t\t.rotateSelf(parseScientific(values[0]))\r\n\t\t\t\t\t.translateSelf(-dx, -dy);\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tconsole.log(`Command ${command} can't implement yet`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn matrix;\r\n}\r\n\r\nexport class SVGNode extends GraphicsNode {\r\n\t/**\r\n\t * Create Graphics from svg subnode\r\n\t * @class\r\n\t * @public\r\n\t * @param {SVGElement} svg\r\n\t * @param {DefaultOptions} options\r\n\t */\r\n\tconstructor(svg, options) {\r\n\t\tsuper();\r\n\t\tthis.options = options;\r\n\t\tthis.dataNode = svg;\r\n\t\tthis.type = svg.nodeName.toLowerCase();\r\n\t}\r\n\r\n\t/**\r\n\t * Create a PIXI Graphic from SVG elements\r\n\t * @private\r\n\t * @method SVG#svgChildren\r\n\t * @param {Array<*>} children - Collection of SVG nodes\r\n\t * @param {*} [parentStyle=undefined] Whether to inherit fill settings.\r\n\t * @param {DOMMatrix} [parentMatrix=undefined] Matrix fro transformations\r\n\t */\r\n\tparseChildren(children, parentStyle, parentMatrix) {\r\n\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\tconst child = children[i];\r\n\r\n\t\t\tconst nodeStyle = parseSvgStyle(child);\r\n\t\t\tconst matrix = parseSvgTransform(child);\r\n\t\t\tconst nodeType = child.nodeName.toLowerCase();\r\n\r\n\t\t\t/**\r\n\t\t\t * @type {SVG | SVGNode}\r\n\t\t\t */\r\n\t\t\tlet shape = this;\r\n\r\n\t\t\tif (this.options.unpackTree) {\r\n\t\t\t\tshape = new SVGNode(child, this.options);\r\n\t\t\t}\r\n\r\n\t\t\t//compile full style inherited from all parents\r\n\t\t\tconst fullStyle = Object.assign({}, parentStyle || {}, nodeStyle);\r\n\r\n\t\t\tshape.fillShapes(fullStyle, matrix);\r\n\r\n\t\t\tswitch (nodeType) {\r\n\t\t\t\tcase \"path\": {\r\n\t\t\t\t\tshape.svgPath(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"line\": {\r\n\t\t\t\t\tthis.svgLine(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"circle\":\r\n\t\t\t\tcase \"ellipse\": {\r\n\t\t\t\t\tshape.svgCircle(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"rect\": {\r\n\t\t\t\t\tshape.svgRect(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"polygon\": {\r\n\t\t\t\t\tshape.svgPoly(child, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"polyline\": {\r\n\t\t\t\t\tshape.svgPoly(child, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"g\": {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\t// @if DEBUG\r\n\t\t\t\t\tconsole.info(\"[SVGUtils] <%s> elements unsupported\", child.nodeName);\r\n\t\t\t\t\t// @endif\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tshape.parseChildren(child.children, fullStyle, matrix);\r\n\t\t\tif (this.options.unpackTree) {\r\n\t\t\t\tshape.name = child.getAttribute(\"id\") || \"child_\" + i;\r\n\t\t\t\tthis.addChild(shape);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Convert the Hexidecimal string (e.g., \"#fff\") to uint\r\n\t * @private\r\n\t * @method SVG#hexToUint\r\n\t */\r\n\thexToUint(hex) {\r\n\t\tif (hex === undefined || hex === null) return;\r\n\r\n\t\tif (hex[0] === \"#\") {\r\n\t\t\t// Remove the hash\r\n\t\t\thex = hex.substr(1);\r\n\r\n\t\t\t// Convert shortcolors fc9 to ffcc99\r\n\t\t\tif (hex.length === 3) {\r\n\t\t\t\thex = hex.replace(/([a-f0-9])/gi, \"$1$1\");\r\n\t\t\t}\r\n\t\t\treturn parseInt(hex, 16);\r\n\t\t} else {\r\n\t\t\tconst rgb = tcolor(hex).toRgb();\r\n\r\n\t\t\treturn (rgb.r << 16) + (rgb.g << 8) + rgb.b;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Render a <line> element\r\n\t * @private\r\n\t * @method SVG#svgLine\r\n\t * @param {SVGCircleElement} node\r\n\t */\r\n\tsvgLine(node) {\r\n\t\tconst x1 = parseFloat(node.getAttribute(\"x1\"));\r\n\t\tconst y1 = parseFloat(node.getAttribute(\"y1\"));\r\n\t\tconst x2 = parseFloat(node.getAttribute(\"x2\"));\r\n\t\tconst y2 = parseFloat(node.getAttribute(\"y2\"));\r\n\r\n\t\t//idiot chek\r\n\t\tif (Math.abs(x1 - x2) + Math.abs(y1 - y2) <= EPS) return;\r\n\r\n\t\tthis.moveTo(x1, y1);\r\n\t\tthis.lineTo(x2, y2);\r\n\t}\r\n\r\n\t/**\r\n\t * Render a <ellipse> element or <circle> element\r\n\t * @private\r\n\t * @method SVG#svgCircle\r\n\t * @param {SVGCircleElement} node\r\n\t */\r\n\tsvgCircle(node) {\r\n\t\tlet heightProp = \"r\";\r\n\t\tlet widthProp = \"r\";\r\n\t\tconst isEllipse = node.nodeName === \"ellipse\";\r\n\t\tif (isEllipse) {\r\n\t\t\theightProp += \"y\";\r\n\t\t\twidthProp += \"x\";\r\n\t\t}\r\n\t\tconst width = parseFloat(node.getAttribute(widthProp));\r\n\t\tconst height = parseFloat(node.getAttribute(heightProp));\r\n\t\tconst cx = node.getAttribute(\"cx\") || \"0\";\r\n\t\tconst cy = node.getAttribute(\"cy\") || \"0\";\r\n\t\tlet x = 0;\r\n\t\tlet y = 0;\r\n\t\tif (cx !== null) {\r\n\t\t\tx = parseFloat(cx);\r\n\t\t}\r\n\t\tif (cy !== null) {\r\n\t\t\ty = parseFloat(cy);\r\n\t\t}\r\n\t\tif (!isEllipse) {\r\n\t\t\tthis.drawCircle(x, y, width);\r\n\t\t} else {\r\n\t\t\tthis.drawEllipse(x, y, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Render a <rect> element\r\n\t * @private\r\n\t * @method SVG#svgRect\r\n\t * @param {SVGRectElement} node\r\n\t */\r\n\tsvgRect(node) {\r\n\t\tconst x = parseFloat(node.getAttribute(\"x\")) || 0;\r\n\t\tconst y = parseFloat(node.getAttribute(\"y\")) || 0;\r\n\t\tconst width = parseFloat(node.getAttribute(\"width\"));\r\n\t\tconst height = parseFloat(node.getAttribute(\"height\"));\r\n\t\tconst rx = parseFloat(node.getAttribute(\"rx\"));\r\n\t\tif (rx) {\r\n\t\t\tthis.drawRoundedRect(x, y, width, height, rx);\r\n\t\t} else {\r\n\t\t\tthis.drawRect(x, y, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Render a polyline element.\r\n\t * @private\r\n\t * @method SVG#svgPoly\r\n\t * @param {SVGPolylineElement} node\r\n\t */\r\n\tsvgPoly(node, close) {\r\n\t\tconst pointsAttr = node.getAttribute(\"points\");\r\n\t\tconst pointsRaw = pointsAttr.split(/[ ,]/g);\r\n\t\tconst points = pointsRaw.reduce((acc, p) => (p && acc.push(parseFloat(p)), acc), []);\r\n\t\tthis.drawPolygon(points, close);\r\n\t}\r\n\r\n\t/**\r\n\t * Set the fill and stroke style.\r\n\t * @private\r\n\t * @method SVG#fillShapes\r\n\t * @param {*} style\r\n\t * @param {DOMMatrix} matrix\r\n\t */\r\n\tfillShapes(style, matrix) {\r\n\t\tconst { fill, opacity, stroke, strokeWidth, strokeOpacity, fillOpacity } = style;\r\n\r\n\t\tconst isStrokable = stroke !== undefined && stroke !== \"none\" && stroke !== \"transparent\";\r\n\t\tconst isFillable = fill !== undefined && fill !== \"none\" && fill !== \"transparent\";\r\n\r\n\t\tconst defaultLineWidth = isStrokable ? this.options.lineWidth || 1 : 0;\r\n\t\tconst lineWidth = strokeWidth !== undefined ? Math.max(0.5, parseFloat(strokeWidth)) : defaultLineWidth;\r\n\t\tconst lineColor = isStrokable ? this.hexToUint(stroke) : this.options.lineColor;\r\n\r\n\t\tlet strokeOpacityValue = 0;\r\n\t\tlet fillOpacityValue = 0;\r\n\r\n\t\tif (isStrokable) {\r\n\t\t\tstrokeOpacityValue =\r\n\t\t\t\topacity || strokeOpacity ? parseFloat(opacity || strokeOpacity) : this.options.lineOpacity;\r\n\t\t}\r\n\t\tif (isFillable) {\r\n\t\t\tfillOpacityValue = opacity || fillOpacity ? parseFloat(opacity || fillOpacity) : this.options.fillOpacity;\r\n\t\t}\r\n\r\n\t\tif (fill) {\r\n\t\t\tif (!isFillable) {\r\n\t\t\t\tthis.beginFill(0, 0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.beginFill(this.hexToUint(fill), fillOpacityValue);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.beginFill(this.options.fillColor, 1);\r\n\t\t}\r\n\r\n\t\tthis.lineStyle(lineWidth, lineColor, strokeOpacityValue);\r\n\t\tthis.setMatrix(matrix);\r\n\t}\r\n\r\n\t/**\r\n\t * Render a <path> d element\r\n\t * @method SVG#svgPath\r\n\t * @param {SVGPathElement} node\r\n\t */\r\n\tsvgPath(node) {\r\n\t\tconst d = node.getAttribute(\"d\");\r\n\r\n\t\tthis.addPath(new Path2D(d));\r\n\t}\r\n}\r\n\r\nexport default class SVG extends SVGNode {\r\n\t/**\r\n\t * Create Graphics from svg\r\n\t * @class\r\n\t * @public\r\n\t * @param {SVGElement | string} svg\r\n\t * @param {DefaultOptions} options\r\n\t */\r\n\tconstructor(svg, options = DEFAULT) {\r\n\t\tif (!(svg instanceof SVGElement)) {\r\n\t\t\tconst container = document.createElement(\"div\");\r\n\t\t\tcontainer.innerHTML = svg;\r\n\r\n\t\t\t//@ts-ignore\r\n\t\t\tsvg = container.children[0];\r\n\t\t\tif (!(svg instanceof SVGElement)) {\r\n\t\t\t\tthrow new Error(\"invalid SVG!\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper(svg, Object.assign({}, DEFAULT, options || {}));\r\n\t\t//@ts-ignore\r\n\t\tthis.parseChildren(svg.children);\r\n\t\tthis.type = \"svg\";\r\n\r\n\t\tthis._width = +svg.getAttribute(\"width\");\r\n\t\tthis._height = +svg.getAttribute(\"height\");\r\n\r\n\t\tif(!this._width || !this._height) {\r\n\r\n\t\t\tdocument.body.appendChild(svg);\r\n\t\t\t\r\n\t\t\tconst bbox = svg.getBBox();\r\n\r\n\t\t\tthis._width = bbox.width + bbox.x;\r\n\t\t\tthis._height = bbox.height + bbox.y;\r\n\t\t\t\r\n\t\t\tdocument.body.removeChild(svg);\r\n\t\t}\r\n\t}\r\n\r\n\tget width() {\r\n\t\treturn this._width;\r\n\t}\r\n\r\n\tget height() {\r\n\t\treturn this._height;\r\n\t}\r\n}\r\n","\r\nimport Svg from \"pixi5-svg\";\r\n\r\nconst c = document.querySelector(\"#app\");\r\nconst canvas = document.createElement(\"canvas\");\r\n\tcanvas.width = window.innerWidth;\r\n\tcanvas.height = window.innerHeight;\r\n\r\nconst ctx = canvas.getContext(\"2d\");\r\n\r\nfetch(\"./data/bee.svg.txt\").then((r) => r.text()).then( (data) => {\r\n\r\n\tconst pw = canvas.width;\r\n\tconst ph = canvas.height;\r\n\tconst offset = 40;\r\n\tconst fileReader = new FileReader();\r\n\tconst input = document.querySelector(\"#file-input\");\r\n\tconst toogle = document.querySelector(\"#toogle\");\r\n\tconst ptime = document.querySelector(\"#parsing-time\");\r\n\tconst pchildrens = document.querySelector(\"#childrens\");\r\n\t\r\n\tlet translate = {\r\n\t\tx:  0, y : 0\r\n\t}\r\n\t\r\n\tlet scale = 1;\r\n\tlet svgE = undefined;\r\n\tlet lastFrame = undefined;\r\n\r\n\tlet lastFileResult = undefined;\r\n\r\n\ttoogle.addEventListener(\"change\", (_)=>{\r\n\t\tlastFrame = undefined;\r\n\t});\r\n\r\n\tinput.addEventListener(\"change\", e => {\r\n\t\tconst files = e.target.files;\r\n\t\tconst svg = files[0];\r\n\r\n\t\tfileReader.onloadend = _ => {\r\n\t\t\tlastFileResult = fileReader.result;\r\n\t\t\tcreateAndFit(fileReader.result);\r\n\t\t};\r\n\t\tfileReader.readAsText(svg);\r\n    });\r\n\r\n\tfunction render(cached = false) {\r\n\t\t\r\n\t\tctx.setTransform(new DOMMatrix());\r\n\r\n\t\tctx.fillStyle = \"#aaaaaa\";\r\n\t\tctx.fillRect(0,0,canvas.width, canvas.height);\r\n\t\t\r\n\t\tif(!cached || !lastFrame){\r\n\t\t\t\r\n\t\t\tctx.translate(translate.x , translate.y);\r\n\t\t\tctx.scale(scale, scale);\r\n\r\n\t\t\tsvgE.draw(ctx, true);\r\n\r\n\t\t\tif(!lastFrame) {\r\n\t\t\t\tconst i =  new Image();\r\n\t\t\t\t\ti.src = canvas.toDataURL();\r\n\t\t\t\tlastFrame = {\r\n\t\t\t\t\tframe : i,\r\n\t\t\t\t\ttranslate: {...translate},\r\n\t\t\t\t\tscale: scale\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet cx = translate.x - lastFrame.translate.x;\r\n\t\t\tlet cy = translate.y - lastFrame.translate.y;\r\n\t\t\tlet cs = scale / lastFrame.scale;\r\n\t\t\tlet f = lastFrame.frame;\r\n\t\t\t\r\n\t\t\tctx.translate(cx, cy);\r\n\t\t\tctx.scale(cs, cs);\r\n\t\t\tctx.drawImage(f, 0,0);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction createAndFit(svgText) {\r\n\t\tconst start = performance.now();\r\n\t\tsvgE = window.svg = new Svg(svgText, {unpackTree : true});\r\n\t\t\r\n\t\tconst delta = performance.now() - start;\r\n\t\t\r\n\t\tptime.textContent = delta.toFixed(2) + \"ms\";\r\n\r\n\t\tlet count = 1;\r\n\t\tconst counter = (node)=>{\r\n\t\t\tcount += node.children.length;\r\n\t\t\tnode.children.forEach((e)=> counter(e))\r\n\t\t};\r\n\r\n\t\tcounter(svgE);\r\n\t\tpchildrens.textContent = \"\" + count;\r\n\t\tconsole.log(\"Parsed svg\", svgE);\r\n\r\n\t\tscale = 1 / Math.max(svgE.width / canvas.width, svgE.height / canvas.height);\r\n\t\ttranslate.x = 0.5 * (canvas.width - svgE.width * scale);\r\n\t\ttranslate.y = 0.5 * (canvas.height - svgE.height * scale);\r\n\r\n\t\trender();\r\n\t}\r\n\r\n\t\r\n\tcreateAndFit(data);\r\n\r\n\tcanvas.addEventListener(\"pointermove\", e =>{\r\n\t\t\r\n\t\tif(e.buttons !== 1) return;\r\n\r\n\t\ttranslate.x += e.movementX;\r\n\t\ttranslate.y += e.movementY;\r\n\t\t\r\n\t\trender(!toogle.checked);\r\n\t});\r\n\r\n\tdocument.addEventListener(\"wheel\", e =>{\r\n\t\t\r\n\t\tconst factor = 1 - 0.1 * e.deltaY / 220;\r\n\t\tscale *= factor;\r\n\t\tconst dx = e.clientX;\r\n\t\tconst dy = e.clientY;\r\n\r\n\t\tconst ox = translate.x - dx;\r\n\t\tconst oy = translate.y - dy;\r\n\t\t\r\n\t\ttranslate.x = ox * factor + dx;\r\n\t\ttranslate.y = oy * factor + dy;\r\n\r\n\t\trender(!toogle.checked);\r\n\t});\r\n\t\r\n});\r\n\r\nc.appendChild(canvas);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}